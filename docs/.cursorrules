# CURSOR AI RULES - Dá»± Ã¡n ANH THá»¢ XÃ‚Y

## ğŸ¯ Má»¤C TIÃŠU
Äáº£m báº£o code nháº¥t quÃ¡n, trÃ¡nh trÃ¹ng láº·p, dá»… maintain khi vibe-code lÃ¢u dÃ i.

## ğŸ¨ BRANDING (Báº®T BUá»˜C)
- LUÃ”N follow BRANDING_GUIDE.md khi code UI
- LUÃ”N dÃ¹ng constants tá»« @/lib/constants/branding
- LUÃ”N dÃ¹ng Logo component, Button component tá»« @/components
- KHÃ”NG hardcode mÃ u sáº¯c (#1F3F5F, #E87A00, etc.)
- KHÃ”NG dÃ¹ng gradient loÃ¨ loáº¹t
- CTA luÃ´n mÃ u cam (Orange)

## âš ï¸ QUY Táº®C Báº®T BUá»˜C

### 0. ERROR / WARNING / TYPE ENFORCEMENT (Æ¯U TIÃŠN CAO NHáº¤T)
- **Báº®T BUá»˜C** pass: `npm run lint` vÃ  `npx tsc --noEmit` â†’ 0 errors, 0 warnings.
- Warning = bug tiá»m áº©n, pháº£i fix, khÃ´ng suppress báº±ng config/eslint-disable (trá»« báº¥t kháº£ khÃ¡ng, pháº£i ghi lÃ½ do).
- Khi fix warnings: **KHÃ”NG** phÃ¡ cáº¥u trÃºc/logic hiá»‡n cÃ³, Æ°u tiÃªn sá»­a types/imports/naming.
- Thiáº¿u thÃ´ng tin â†’ **Há»I**, khÃ´ng viáº¿t code â€œtáº¡m Ä‘Ãºngâ€.

### 0.1 TYPE & PRISMA (CÆ¯á» NG CHáº¾)
- Prisma lÃ  nguá»“n sá»± tháº­t cho enum/model. **Cáº¤M** táº¡o enum/type trÃ¹ng nghÄ©a (EntityStatus, ApprovalStatus, CategoryType, ApprovalRequestType, â€¦).
- Import báº¯t buá»™c: `import { Prisma, $Enums } from '@prisma/client'` hoáº·c enum Prisma trá»±c tiáº¿p.
- JSON Prisma: dÃ¹ng **Prisma.InputJsonValue** (ghi) / Prisma.JsonValue (Ä‘á»c). **Cáº¤M** `any | unknown | {} | Record<string, any>`.
- KhÃ´ng Ã©p kiá»ƒu â€œdáº­p lá»—iâ€ vá»›i Prisma. Chá»‰ dÃ¹ng `as Type` khi cÃ³ comment giáº£i thÃ­ch vÃ¬ sao TS khÃ´ng suy luáº­n Ä‘Æ°á»£c vÃ  khÃ´ng liÃªn quan Prisma enum/input.

### 0.2 KIá»‚M TRA TRÆ¯á»šC KHI Táº O Má»šI
- LUÃ”N kiá»ƒm tra file/function/component/type tÆ°Æ¡ng tá»±; náº¿u cÃ³ â†’ dÃ¹ng láº¡i/má»Ÿ rá»™ng, KHÃ”NG táº¡o má»›i.
- Há»i user: "ÄÃ£ cÃ³ file tÆ°Æ¡ng tá»±, cÃ³ muá»‘n dÃ¹ng láº¡i khÃ´ng?"

### 1. KIá»‚M TRA TRÆ¯á»šC KHI Táº O Má»šI
- LUÃ”N kiá»ƒm tra xem Ä‘Ã£ cÃ³ file/function/component tÆ°Æ¡ng tá»± chÆ°a
- Náº¿u cÃ³, PHáº¢I dÃ¹ng láº¡i hoáº·c má»Ÿ rá»™ng, KHÃ”NG táº¡o má»›i
- Há»i user: "ÄÃ£ cÃ³ file tÆ°Æ¡ng tá»±, cÃ³ muá»‘n dÃ¹ng láº¡i khÃ´ng?"

### 2. Cáº¤U TRÃšC THÆ¯ Má»¤C
- **Landing**: landing/src/app/sections/, landing/src/app/pages/, landing/src/app/components/
- **Admin**: admin/src/app/pages/, admin/src/app/components/, admin/src/app/forms/
- **API**: api/src/routes/, api/src/services/, api/src/middleware/, api/src/schemas/
- **Shared**: packages/shared/src/, packages/ui/src/
- Má»—i file chá»‰ lÃ m 1 viá»‡c, tÃªn file mÃ´ táº£ rÃµ chá»©c nÄƒng

### 3. NAMING CONVENTIONS
- Files: PascalCase cho components (HangMucSelector.tsx), camelCase cho utils (formatPrice.ts)
- Components: PascalCase (HangMucSelector)
- Functions/Variables: camelCase, mÃ´ táº£ rÃµ (calculateDuToan, not calc)
- Constants: UPPER_SNAKE_CASE (MAX_DIEN_TICH, LEAD_STATUS)
- Types/Interfaces: PascalCase (HangMuc, DuToanResult)

### 3.1 BRANDING & UI
- **Dá»± Ã¡n xÃ¢y dá»±ng**: Follow BRANDING_GUIDE.md, dÃ¹ng constants tá»« @/lib/constants/branding
- **Dá»± Ã¡n nhÃ  hÃ ng**: Follow design tokens tá»« packages/shared/src/tokens.ts
- **Chung**: DÃ¹ng shared components tá»« packages/ui/, KHÃ”NG hardcode mÃ u/font/CTA

### 4. IMPORT ORDER (Báº®T BUá»˜C)
```
1. External libraries (react, axios, etc)
2. Internal absolute imports (@/components, @/lib, etc)
3. Relative imports (./Component)
4. Types (import type ...)
5. Styles (./styles.css)
```

### 5. CODE STRUCTURE
- **Components**: State â†’ Effects â†’ Functions â†’ Early returns â†’ Render
- **Services**: Pure functions, khÃ´ng cÃ³ side effects khÃ´ng cáº§n thiáº¿t
- **Hono Routes** (API): 
  - Handler: async (c: Context) => { ... }
  - Params: c.req.param('id')
  - Body: await c.req.json()
  - Response: c.json(data) hoáº·c c.text(), c.html()
  - Status: c.json(data, 200) hoáº·c c.notFound(), c.badRequest()
- **Middleware**: Hono middleware pattern (c, next) => { ... }
- Má»—i function chá»‰ lÃ m 1 viá»‡c, tÃªn function mÃ´ táº£ rÃµ viá»‡c Ä‘Ã³

### 6. TRÃNH CODE RÃC
- KHÃ”NG comment code cÅ©, XÃ“A luÃ´n
- KHÃ”NG táº¡o utility trÃ¹ng láº·p, dÃ¹ng láº¡i tá»« lib/utils/
- KHÃ”NG hardcode strings/numbers, dÃ¹ng constants
- KHÃ”NG táº¡o type trÃ¹ng láº·p, dÃ¹ng láº¡i tá»« types/

### 7. ERROR HANDLING
- LUÃ”N cÃ³ try-catch cho async operations
- LUÃ”N validate input trÆ°á»›c khi xá»­ lÃ½
- LUÃ”N cÃ³ error messages rÃµ rÃ ng

### 8. TYPESCRIPT
- LUÃ”N dÃ¹ng types, trÃ¡nh any
- Types Ä‘á»‹nh nghÄ©a trong src/types/, export qua index.ts
- DÃ¹ng interface cho objects, type cho unions/intersections

### 9. KHI USER YÃŠU Cáº¦U FEATURE Má»šI
1. Äá»c code hiá»‡n táº¡i liÃªn quan
2. Kiá»ƒm tra file/function tÆ°Æ¡ng tá»±
3. Follow cáº¥u trÃºc vÃ  pattern hiá»‡n cÃ³
4. TÃ¡ch logic ra service/utils náº¿u phá»©c táº¡p
5. DÃ¹ng types tá»« @/types/
6. Follow import order
7. ThÃªm error handling

### 10. KHI KHÃ”NG CHáº®C
- Há»i user thay vÃ¬ Ä‘oÃ¡n
- Äá» xuáº¥t giáº£i phÃ¡p vÃ  giáº£i thÃ­ch
- Äá»c CODING_STANDARDS.md trÆ°á»›c

### 11. MONOREPO NX STRUCTURE
- **Apps**: landing/, admin/, api/ - Má»—i app Ä‘á»™c láº­p
- **Packages**: packages/shared/, packages/ui/ - Shared code
- **Import paths**: 
  - Trong app: Relative imports (./Component)
  - Cross-app: KhÃ´ng import trá»±c tiáº¿p, dÃ¹ng shared packages
  - Shared: Export qua index.ts
- **Scripts**: 
  - Root: npm run dev:api, dev:landing, dev:admin
  - App-specific: cd app && npm run dev
- **Dependencies**: 
  - App-specific: Install trong app/package.json
  - Shared: Install trong packages/*/package.json

### 12. VITE + REACT PATTERNS
- **File structure**: 
  - Components: PascalCase.tsx
  - Pages: PascalCase.tsx
  - Utils: camelCase.ts
- **Imports**: 
  - Vite aliases: @/components, @/lib (náº¿u cÃ³)
  - Hoáº·c relative imports
- **Assets**: 
  - Images: public/ hoáº·c import tá»« src/
  - Styles: CSS modules hoáº·c inline styles
- **Hot reload**: Tá»± Ä‘á»™ng, khÃ´ng cáº§n config thÃªm

## ğŸ“‹ CHECKLIST TRÆ¯á»šC KHI Táº O CODE

- [ ] Source of truth? (Prisma enum/model hay domain type cÃ³ sáºµn)
- [ ] ÄÃ£ tÃ¬m file/type tÆ°Æ¡ng tá»± Ä‘á»ƒ tÃ¡i dÃ¹ng/má»Ÿ rá»™ng?
- [ ] CÃ³ vi pháº¡m â€œCáº¤M enum/type trÃ¹ng Prismaâ€ khÃ´ng?
- [ ] JSON field dÃ¹ng Prisma.InputJsonValue chÆ°a?
- [ ] Cháº¯c cháº¯n pass `npm run lint` + `npx tsc --noEmit`? Náº¿u khÃ´ng cháº¯c â†’ Há»I.
- [ ] Frontend: tuÃ¢n BRANDING_GUIDE, dÃ¹ng constants/components chuáº©n?
- [ ] Backend: controller/middleware má»i nhÃ¡nh return/next rÃµ rÃ ng, khÃ´ng cÃ²n warning.

## ğŸš« KHÃ”NG BAO GIá»œ

- Táº¡o file má»›i náº¿u Ä‘Ã£ cÃ³ file tÆ°Æ¡ng tá»±
- Táº¡o function trÃ¹ng láº·p
- Hardcode strings/numbers
- DÃ¹ng any trong TypeScript
- Comment code cÅ© thay vÃ¬ xÃ³a
- Táº¡o utility rÃ¡c trong component

## âœ… LUÃ”N LÃ€M

- Kiá»ƒm tra code hiá»‡n táº¡i trÆ°á»›c
- DÃ¹ng láº¡i code cÃ³ sáºµn
- Follow patterns hiá»‡n cÃ³
- TÃ¡ch logic phá»©c táº¡p
- Äáº·t tÃªn rÃµ rÃ ng, tá»± giáº£i thÃ­ch
- ThÃªm error handling
- Validate input

