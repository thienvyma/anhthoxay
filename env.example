# ============================================
# NỘI THẤT NHANH - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env file with real secrets!

# ============================================
# REQUIRED - Firebase Configuration
# ============================================
# Firebase Project ID (from Firebase Console)
FIREBASE_PROJECT_ID="your-firebase-project-id"

# Firebase Storage Bucket (from Firebase Console > Storage)
FIREBASE_STORAGE_BUCKET="your-project-id.appspot.com"

# Firebase Admin SDK Service Account
# Option 1: Path to service account JSON file
GOOGLE_APPLICATION_CREDENTIALS="./path/to/service-account.json"

# Option 2: Service account JSON as base64 encoded string (for cloud deployments)
# FIREBASE_SERVICE_ACCOUNT_BASE64="base64-encoded-service-account-json"

# ============================================
# REQUIRED IN PRODUCTION - Security
# ============================================
# JWT Secret - MUST be at least 32 characters in production
# Generate with: openssl rand -base64 32
# Note: This is used for internal API tokens, Firebase Auth handles user authentication
JWT_SECRET="your-super-secret-jwt-key-at-least-32-chars"

# Previous JWT Secret - Used during secret rotation
# When rotating secrets, move current JWT_SECRET here and set new JWT_SECRET
# This allows tokens signed with old secret to remain valid during transition
# JWT_SECRET_PREVIOUS="your-previous-jwt-secret-32-chars"

# ============================================
# OPTIONAL - Server Configuration
# ============================================
# Node environment: development, production, test
NODE_ENV="development"

# API server port
PORT="4202"

# ============================================
# OPTIONAL - CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# In production, set to your frontend domains
CORS_ORIGINS="http://localhost:4200,http://localhost:4201,http://localhost:4203"

# ============================================
# OPTIONAL - Redis (for rate limiting & caching)
# ============================================
# For Docker setup: docker-compose up -d (uses port 6380)
# Note: Redis is optional - in-memory fallback is used if not configured
REDIS_URL="redis://localhost:6380"

# ============================================
# OPTIONAL - Encryption Key
# ============================================
# Used for encrypting sensitive data (OAuth tokens, etc.)
# Generate with: openssl rand -base64 32
# ENCRYPTION_KEY="your-32-byte-base64-encoded-key"

# Previous Encryption Key - Used during key rotation
# When rotating keys, move current ENCRYPTION_KEY here and set new ENCRYPTION_KEY
# This allows data encrypted with old key to be decrypted during transition
# Use reEncryptBatch() to migrate data to new key
# ENCRYPTION_KEY_PREVIOUS="your-previous-32-byte-base64-key"

# ============================================
# OPTIONAL - Google OAuth (for Google Sheets integration)
# ============================================
# GOOGLE_CLIENT_ID="your-google-client-id"
# GOOGLE_CLIENT_SECRET="your-google-client-secret"
# GOOGLE_REDIRECT_URI="http://localhost:4202/integrations/google/callback"
# Production: GOOGLE_REDIRECT_URI="https://api.noithatnhanh.vn/integrations/google/callback"

# Admin URL for OAuth callback redirect (auto-detected if not set)
# ADMIN_URL="http://localhost:4201"
# Production: ADMIN_URL="https://admin.noithatnhanh.vn"

# ============================================
# OPTIONAL - Sentry Error Tracking
# ============================================
# Create a Sentry project at https://sentry.io
# Get DSN from Project Settings > Client Keys (DSN)
# SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"

# ============================================
# OPTIONAL - Media Storage (Local Development)
# ============================================
# Local storage directory (development only)
# In production, use Firebase Storage (configured above)
MEDIA_DIR=".media"

# ============================================
# OPTIONAL - Legacy S3 Storage (Deprecated)
# ============================================
# Note: Firebase Storage is now the primary storage solution
# S3 configuration is kept for backward compatibility during migration
# 
# AWS S3
# S3_BUCKET="your-bucket-name"
# S3_REGION="ap-southeast-1"
# S3_ACCESS_KEY_ID="AKIA..."
# S3_SECRET_ACCESS_KEY="..."
# S3_PUBLIC_URL="https://your-bucket.s3.ap-southeast-1.amazonaws.com"

# Cloudflare R2
# S3_BUCKET="your-bucket-name"
# S3_REGION="auto"
# S3_ENDPOINT="https://ACCOUNT_ID.r2.cloudflarestorage.com"
# S3_ACCESS_KEY_ID="..."
# S3_SECRET_ACCESS_KEY="..."
# S3_PUBLIC_URL="https://pub-xxx.r2.dev"
# S3_FORCE_PATH_STYLE="true"

# ============================================
# FRONTEND - API URL
# ============================================
# API URL for frontend apps (Landing, Admin, Portal)
# In development, defaults to http://localhost:4202 if not set
# In production, this MUST be set to your API domain
VITE_API_URL="http://localhost:4202"

# ============================================
# FRONTEND - Firebase Configuration (Client-side)
# ============================================
# Firebase Web App configuration (from Firebase Console > Project Settings > Your apps)
VITE_FIREBASE_API_KEY="your-firebase-api-key"
VITE_FIREBASE_AUTH_DOMAIN="your-project-id.firebaseapp.com"
VITE_FIREBASE_PROJECT_ID="your-firebase-project-id"
VITE_FIREBASE_STORAGE_BUCKET="your-project-id.appspot.com"
VITE_FIREBASE_MESSAGING_SENDER_ID="your-messaging-sender-id"
VITE_FIREBASE_APP_ID="your-firebase-app-id"
