# ============================================
# NỘI THẤT NHANH - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env file with real secrets!

# ============================================
# REQUIRED - Database
# ============================================
# PostgreSQL (recommended for all environments)
# For Docker setup: docker-compose up -d
#
# Connection Pool Settings (Production recommended):
# - connection_limit: Max connections in pool (default: 50)
# - pool_timeout: Seconds to wait for connection (default: 30)
#
# Development (no pool settings needed):
DATABASE_URL="postgresql://noithatnhanh:noithatnhanh_dev_2024@localhost:5432/noithatnhanh_dev?schema=public"

# Production (with connection pooling):
# DATABASE_URL="postgresql://user:pass@host:5432/db?schema=public&connection_limit=50&pool_timeout=30"

# SQLite (legacy - not recommended)
# DATABASE_URL="file:./infra/prisma/dev.db"

# ============================================
# REQUIRED IN PRODUCTION - Security
# ============================================
# JWT Secret - MUST be at least 32 characters in production
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-at-least-32-chars"

# Previous JWT Secret - Used during secret rotation
# When rotating secrets, move current JWT_SECRET here and set new JWT_SECRET
# This allows tokens signed with old secret to remain valid during transition
# JWT_SECRET_PREVIOUS="your-previous-jwt-secret-32-chars"

# ============================================
# OPTIONAL - Server Configuration
# ============================================
# Node environment: development, production, test
NODE_ENV="development"

# API server port
PORT="4202"

# ============================================
# OPTIONAL - CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# In production, set to your frontend domains
CORS_ORIGINS="http://localhost:4200,http://localhost:4201,http://localhost:4203"

# ============================================
# OPTIONAL - Redis (for rate limiting & caching)
# ============================================
# For Docker setup: docker-compose up -d (uses port 6380)
REDIS_URL="redis://localhost:6380"

# ============================================
# OPTIONAL - Encryption Key
# ============================================
# Used for encrypting sensitive data (OAuth tokens, etc.)
# Generate with: openssl rand -base64 32
# ENCRYPTION_KEY="your-32-byte-base64-encoded-key"

# Previous Encryption Key - Used during key rotation
# When rotating keys, move current ENCRYPTION_KEY here and set new ENCRYPTION_KEY
# This allows data encrypted with old key to be decrypted during transition
# Use reEncryptBatch() to migrate data to new key
# ENCRYPTION_KEY_PREVIOUS="your-previous-32-byte-base64-key"

# ============================================
# OPTIONAL - Google OAuth (for Google Sheets integration)
# ============================================
# GOOGLE_CLIENT_ID="your-google-client-id"
# GOOGLE_CLIENT_SECRET="your-google-client-secret"
# GOOGLE_REDIRECT_URI="http://localhost:4202/integrations/google/callback"
# Production: GOOGLE_REDIRECT_URI="https://api.noithatnhanh.vn/integrations/google/callback"

# ============================================
# OPTIONAL - Sentry Error Tracking
# ============================================
# Create a Sentry project at https://sentry.io
# Get DSN from Project Settings > Client Keys (DSN)
# SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"

# ============================================
# OPTIONAL - Media Storage
# ============================================
MEDIA_DIR=".media"

# ============================================
# FRONTEND - API URL
# ============================================
# API URL for frontend apps (Landing, Admin, Portal)
# In development, defaults to http://localhost:4202 if not set
# In production, this MUST be set to your API domain
VITE_API_URL="http://localhost:4202"
